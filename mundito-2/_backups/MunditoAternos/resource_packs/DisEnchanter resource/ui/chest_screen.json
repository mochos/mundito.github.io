{
  "namespace": "chest",

//chest label needed for getting the entity name
  "chest_label": {
    "$new_container_title|default": "$container_title",
	"$disenchanter_name": "$container_title",
    "text": "$new_container_title"
  },
  
  //UI Images
  "cell_image_book@common.cell_image": {
    "texture": "textures/cell_image_book",
    "layer": 1
  },
  "cell_image_center@common.cell_image": {
    "texture": "textures/cell_image_center",
    "layer": 1
  },
  "cell_image_amethyst@common.cell_image": {
    "texture": "textures/cell_image_amethyst",
    "layer": 1
  },
  "cell_image_blank@common.cell_image": {
    "texture": "textures/cell_image_blank",
	"size":[18,18],
    "layer": 1
  },
  "center_image": {
	"type": "image",
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "layer": 1,
    "offset": [ 0, 0 ],
    "size": [ 26, 26 ],
    "texture": "textures/center_ui"
  },
  "book_image": {
	"type": "image",
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "layer": 1,
    "offset": [ 1, 1 ],
    "size": [ 16, 16 ],
    "texture": "textures/book_ui"
  },
  "amethyst_image": {
	"type": "image",
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "layer": 1,
    "offset": [ 1, 1 ],
    "size": [ 16, 16 ],
    "texture": "textures/amethyst_ui"
  },
  "disenchanting": {
	"type": "image",
    "layer": -1,
    "texture": "textures/disenchanting",
	"ignored": true //temporary
  },
  "disenchanting_overlay": {
	"type": "image",
    "layer": 0,
    "texture": "textures/disenchanting_overlay2",
	"ignored": true //temporary
  },
    "disenchanter_image": {
	"type": "image",
    "texture": "textures/disenchanter3"
  }, 
  //-------------
  
  //custom panel
    "disenchanter":{
	"type": "panel",
	"layer": 1,
	"controls":[
	{
		"overlay@chest.disenchanting_overlay":{
			"layer": 1
		}
	},
	{
		"dis@chest.disenchanting":{
			"size":[0,0],
			"layer": 0
		}
	},
	{
		"dis_img@chest.disenchanter_image":{
			"layer": -1	
		}
	}
	]
  },
  
  //------------
  
  
  
  
  "side_panel_label@chest.chest_label": {
    "type": "label",
	"text": "Storage"
  },
	"input_grid_panel":{
	"type": "panel",
    "grid_position": [ 0, 0 ],
    "ignored": true
  },
  "small_chest_grid": {
    "type": "grid",
    "size": [ 162, 54 ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "grid_dimensions": [ 9, 3 ],
    "grid_item_template": "chest.chest_grid_item",
    "collection_name": "container_items"
  },
  
  "anim_disenchanting": {
    "anim_type": "size",
    "from": [ 0, 0 ],
    "to": [ 80, 80 ],
    "duration": 1,
	"resettable": true
	
  },
  "anim_disenchanting_reset": {
    "anim_type": "size",
    "from": [ 0, 0 ],
    "to": [ 0, 0 ],
    "duration": 0.1,
	"resettable": true
	
  },
  //custom item grid
  "book_grid_item@chest.chest_grid_item":{
	  "$cell_overlay_ref": "book_image",
	  "$background_images|default": "cell_image_blank",
	  "layer":2
  },
//custom grid container
  "disenchanter_container_grid": {
    "type": "grid",
    "size": [ 80, 8 ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "grid_dimensions": [ 10, 1 ],
    "collection_name": "container_items",
	"controls":[
	{
    "one@input_grid_panel": {
	"grid_position": [ 0, 0 ],
    "ignored": false,
      "controls": [
      {
		"1@chest.chest_grid_item": {
		"offset": [ 58, 48 ], //change this if u want to move this grid
		"size": [ 26, 26 ],
		"$cell_overlay_ref": "chest.center_image",
	    "$background_images|default": "cell_image_blank",
		"$item_renderer_panel_size|default": [ 26, 26 ],
		"$item_renderer_size|default": [ 20, 20 ]
		}
	  },
	  {
		  "center@chest.cell_image_center":{
			"size":[28,28],
			"offset": [ 58, 48 ]
		  }
	  }
	  ]
	}
    },
	{
    "two@input_grid_panel": {
	"grid_position": [ 1, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {			
		"offset": [ 0, 48 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 0, 48 ]
		  }
	  }
	  ]
	}
    },
	{
    "three@input_grid_panel": {
	"grid_position": [ 2, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 11, 18 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 11, 18 ]
		  }
	  }
	  ]
	}
    },
	{
    "four@input_grid_panel": {
	"grid_position": [ 3, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 34, 0 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 34, 0 ]
		  }
	  }
	  ]
	}
    },
	{
    "five@input_grid_panel": {
	"grid_position": [ 4, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 56, 18 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 56, 18 ]
		  }
	  }
	  ]
	}
    },
	{
    "six@input_grid_panel": {
	"grid_position": [ 5, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 68, 48 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 68, 48 ]
		  }
	  }
	  ]
	}
    },
	{
    "seven@input_grid_panel": {
	"grid_position": [ 6, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 42, 80 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 42, 80 ]
		  }
	  }
	  ]
	}
    },
	{
    "eight@input_grid_panel": {
	"grid_position": [ 7, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ 2, 98 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ 2, 98 ]
		  }
	  }
	  ]
	}
    },
	{
    "nine@input_grid_panel": {
	"grid_position": [ 8, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"offset": [ -36, 80 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_book":{
			"size":[21,21],
			"offset": [ -36, 80 ]
		  }
	  }
	  ]
	}
    },
	{
    "amethyst@input_grid_panel": {
	"grid_position": [ 9, 0 ],
    "ignored": false,
      "controls": [
      {
		"2@chest.book_grid_item": {
		"$cell_overlay_ref": "chest.amethyst_image",
		"offset": [ 40, 105 ] //change this if u want to move this grid
		}
	  },
	  {
		  "book@chest.cell_image_amethyst":{
			"size":[21,21],
			"offset": [ 40, 105 ]
		  }
	  }
	  ]
	}
    }
	]
  },
//---
  "small_chest_panel_top_half": {
    "type": "panel",
    "size": [ "100%", "50%" ],
    "offset": [ 0, 12 ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      { "chest_label@chest.chest_label": {} },
      {
        "small_chest_grid@chest.small_chest_grid": {
          "offset": [ 7, 9 ]
        }
      }
    ]
  },
//Side panel
	"hotbar_side_panel@common.common_panel":{
		"type": "panel",
		"layer": -6,
		"size": [ 22, 166 ],
		"offset": [ 0, 0 ],	
		"$show_close_button": false
	},
//custom container top half
  "disenchanter_container_top_half": {
    "type": "panel",
    "size": [ 220, 70 ],
    "offset": [ 0, 0 ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      { "chest_label@chest.chest_label": {
		  "offset":[5,5],
		  "layer": 1
	  }
	  },
	  { "warning": {
		  "type": "label",
		  "offset":[-61,-15],
		  "text": "§cPlace Only 1 Book",
		  "layer": 1
	  }
	  },
      {
        "large_chest_grid@chest.disenchanter_container_grid": {
          "offset": [ 26, 35 ],
		  "layer": 1
        }
      },
	  {"rt@chest.disenchanter":{
		  "layer": 0,
			"size":[130,130],
			"offset":[-23,55],
		  "layer": 0
	  }}
    ]
  },
  "mobile_disenchanter_container_top_half": {
    "type": "panel",
    "size": [ 220, 45 ],
    "offset": [ 0, 0 ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      { "chest_label@chest.chest_label": {
		  "offset":[5,5],
		  "layer": 1
	  }
	  },
	  { "warning": {
		  "type": "label",
		  "offset":[-75,3],
		  "text": "§cPlace \nOnly 1 Book",
		  "layer": 1
	  }
	  },
      {
        "large_chest_grid@chest.disenchanter_container_grid": {
          "offset": [ 26, 30 ],
		  "layer": 1
        }
      },
	  {"rt@chest.disenchanter":{
		  "layer": 0,
			"size":[130,130],
			"offset":[-23,63],
		  "layer": 0
	  }}
    ]
  },
//---
  "small_root_panel@common.root_panel": {
    "$chest_panel|default": "chest.small_chest_panel_top_half",
    "layer": 1,
    "controls": [
      { "common_panel@common.common_panel": {} },
      {
        "chest_panel": {
          "type": "panel",
          "layer": 5,
          "controls": [
            { "small_chest_panel_top_half@$chest_panel": {} },
            { "inventory_panel_bottom_half_with_label@common.inventory_panel_bottom_half_with_label": {} },
            { "hotbar_grid@common.hotbar_grid_template": {} },
            { "inventory_take_progress_icon_button@common.inventory_take_progress_icon_button": {} }
          ]
        }
      },
      { "inventory_selected_icon_button@common.inventory_selected_icon_button": {} },
      { "gamepad_cursor@common.gamepad_cursor_button": {} }
    ]
  },
  
  //for mobile
  "mobile_small_root_panel@common.root_panel": {
    "$chest_panel|default": "chest.small_chest_panel_top_half",
    "layer": 1,
    "controls": [
      { "common_panel@common.common_panel": {} },
      {
        "chest_panel": {
          "type": "panel",
          "layer": 5,
          "controls": [
            { "small_chest_panel_top_half@$chest_panel": {} },
            { "inventory_panel_bottom_half_with_label@common.inventory_panel_bottom_half_with_label": {
				"offset":[0,20]
			} },
			{
				"hotbar_panel@chest.hotbar_side_panel":{
					"size": [ 26, 170 ],
					"offset":[-100,25]
				}
			},
            { "hotbar_grid@common.hotbar_grid_template": {
				"size": [ 18, 162 ],
				"grid_dimensions": [ 1, 9 ],
				"offset":[-100,-5]
			} },
            { "inventory_take_progress_icon_button@common.inventory_take_progress_icon_button": {} }
          ]
        }
      },
      { "inventory_selected_icon_button@common.inventory_selected_icon_button": {} },
      { "gamepad_cursor@common.gamepad_cursor_button": {} }
    ]
  },
  
//setting top half for custom container
  "disenchanter_container_root_panel@small_root_panel": {
    "size": [ 176, 245 ],
    "$chest_panel": "chest.disenchanter_container_top_half"
  },
  "mobile_disenchanter_container_root_panel@mobile_small_root_panel": {
    "size": [ 176, 220 ],
    "$chest_panel": "chest.mobile_disenchanter_container_top_half"
  },
//---
  "small_chest_panel": {
    "type": "panel",
    "controls": [
      { "container_gamepad_helpers@common.container_gamepad_helpers": {} },
      {
        "flying_item_renderer@common.flying_item_renderer": {
          "layer": 11
        }
      },
      {
        "selected_item_details_factory@common.selected_item_details_factory": {
          "control_name": "@chest.selected_item_details"
        }
      },
      {
        "item_lock_notification_factory@common.item_lock_notification_factory": {
          "control_name": "@common.item_lock_notification"
        }
      },
      {
        "root_panel@$root_panel": { }
      }
    ]
  },
  "ender_chest_panel@chest.small_chest_panel": {
  },
  
  "small_chest_screen@common.inventory_screen_common": {
    "$close_on_player_hurt|default": true,
    "close_on_player_hurt": "$close_on_player_hurt",
    "$root_panel|default": "chest.small_root_panel", //default root panel
    "$new_container_title|default": "$container_title", //title of container
    "$container_size|default": 27, //default size if nothing matches
    "modifications":[
	//Not Disenchanting
	{
		"array_name": "variables",
		"operation": "insert_back",
		"value": {
			"requires": "($container_title = '§r§r§rdisenchanting Table')",
			"$root_panel": "chest.disenchanter_container_root_panel",
			"$new_container_title": "Disenchanting Table",
			"$container_size": 54
		}
	},
	{
		"array_name": "variables",
		"operation": "insert_back",
		"value": {
			"requires": "($pocket_screen and ($container_title = '§r§r§rdisenchanting Table'))",
			"$container_title": "$new_container_title",
			"$screen_content": "chest.mobile_disenchanter_container_root_panel"
		}
	},
	//Disenchanting
	{
		"array_name": "variables",
		"operation": "insert_back",
		"value": {
			"requires": "($container_title = '§r§rdisenchanting Table')",
			"$root_panel": "chest.disenchanter_container_root_panel",
			"$new_container_title": "Disenchanting Table",
			"$container_size": 54
		}
	},
	{
		"array_name": "variables",
		"operation": "insert_back",
		"value": {
			"requires": "($pocket_screen and ($container_title = '§r§rdisenchanting Table'))",
			"$container_title": "$new_container_title",
			"$screen_content": "chest.mobile_disenchanter_container_root_panel"
		}
	}
	]
  },
  //Fixes inventory screen of ender chest disappearing
  "ender_chest_screen@common.inventory_screen_common": {
    "$close_on_player_hurt|default": true,
    "close_on_player_hurt": "$close_on_player_hurt",
    "variables": [
      {
        "requires": "$desktop_screen",
        "$screen_content": "chest.small_root_panel",
        "$screen_bg_content": "common.screen_background"
      },
      {
        "requires": "$pocket_screen",
        "$screen_content": "pocket_containers.ender_chest_panel"
      }
    ]
  }
}